<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Raster (gg.Gg.Raster)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/></head><body><div class="odoc-doc"><a href="../index.html">Up</a><div class="intro"><h1><span class="keyword">Module </span><a href="../#/Raster">Raster</a></h1></div><div class="mod"><div class="def"><span class="keyword">module </span>Raster : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Raster data.<br/><span style="font-weight: bold">WARNING.</span> This interface is subject to change in the future.<br/>Raster data organizes data samples of any dimension in discrete
1D, 2D (images) or 3D space.<br/>A sample has a <a href="Raster/Sample/index.html#/semantics.typ">Sample.semantics</a> that defines its
dimension and the meaning of its <span style="font-style: italic">components</span>. For example a 4D
sample could represent a linear sRGBA sample. Samples are stored
in a buffer of <span style="font-style: italic">scalars</span> of a given
<a href="Ba/index.html#/scalar_type.typ">Ba.scalar_type</a>. A sample can use one scalar per component,
can be packed in a single scalar or may have no direct obvious
relationship to buffer scalars (compressed data). The
<a href="Raster/Sample/index.html#/format.typ">Sample.format</a> defines the semantics and
scalar storage of a sample.<br/>A <a href="Raster/index.html#/t.typ">t</a> value is a collection of samples indexed
by width, height and depth (i.e. x, y, z) stored in a buffer. It
defines the sample data, the extents of the index and the sample
format. The optional res in samples per meters of
a raster data can specify its physical dimension.<br/><span style="font-weight: bold">Spatial convention.</span> If the sample index has to be interpreted
spatially. It must be interpreted relative to the origin of a
right-handed coordinate system. This means that the first sample,
indexed by <code>(0,0,0)</code> is the bottom-left backmost sample
(bottom-left sample for a 2D image).<br/><span style="font-weight: bold">Index sizes.</span> Index sizes are specified using
sizes types which are made of floats as it is more
pratical in most scenarios. These floats should however be <span style="font-style: italic">integral</span> floats. The function v, Sample.scalar_count
and sub ensure this by applying Float.round to these values.
This means that the rsize when called with
<code>meters = false</code> will always return sizes that are integral floats that
you can convert to integers safely without having to think about
rounding issues. Note also that index sizes are always strictly
positive.</div><hr/><div><div class="doc"><h1 id="samples">Sample semantics and formats</h1></div><div class="region" id="/Sample"><a href="#/Sample" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Sample/index.html">Sample</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Sample semantics and formats.</div></div></div><div class="doc"><h1 id="raster">Raster data</h1></div><div class="region" id="/t.typ"><a href="#/t.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>t = <a href="../index.html#/raster.typ">raster</a></div><div class="doc">The type for raster data.</div></div></div><div class="region" id="/v.val"><a href="#/v.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>v : ?res:<a href="../index.html#/v3.typ">v3</a> -&gt; ?first:int -&gt; ?w_stride:int -&gt; ?h_stride:int -&gt; [ `D1 of float | `D2 of <a href="../index.html#/size2.typ">size2</a> | `D3 of <a href="../index.html#/size3.typ">size3</a> ] -&gt; <a href="Sample/index.html#/format.typ">Sample.format</a> -&gt; <a href="../index.html#/buffer.typ">buffer</a> -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc"><code>v res first w_stride h_stride size sf buf</code> is raster data with
sample format <code>sf</code> and buffer <code>b</code>.
<ul><li><code>size</code>, specify the index extents. height and depth if unspecified
default to <code>1</code>. All extents must be strictly positive.</li><li><code>first</code>, <span style="font-style: italic">buffer scalar</span> index where the data of the first sample
is stored.</li><li><code>w_stride</code>, number of <span style="font-style: italic">samples</span> (<span style="font-weight: bold">not</span> buffer scalars) to skip
to go from the first sample of a line to the first sample of the next
line. Defaults to the index width.</li><li><code>h_stride</code>, number of <span style="font-style: italic">lines</span> to skip to go from the first line
of a plane to the first line of the next plane. Defaults to the
index height.</li><li><code>res</code>, is an optional sample resolution specification in
samples per meters.</li></ul><br/>For certain sample formats <code>first</code>, <code>w_stride</code> and <code>h_stride</code> can be
used to specify subspaces in the collection of samples, see sub.<br/>The function scalar_strides can be used to easily compute the
linear buffer scalar index where a sample <code>(x,y,z)</code> starts.</div></div></div><div class="region" id="/res.val"><a href="#/res.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>res : <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/v3.typ">v3</a> option</div><div class="doc"><code>res r</code> is <code>r</code>'s resolution in sample per meters, if any.</div></div></div><div class="region" id="/get_res.val"><a href="#/get_res.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>get_res : <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/v3.typ">v3</a></div><div class="doc"><code>get_res r</code> is res but</div></div></div><div class="region" id="/first.val"><a href="#/first.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>first : <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc"><code>first r</code> is the <span style="font-style: italic">buffer scalar</span> index where the first sample
is stored.</div></div></div><div class="region" id="/w_stride.val"><a href="#/w_stride.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>w_stride : <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc"><code>w_stride r</code> is the number of <span style="font-style: italic">samples</span> to skip to go
from the first sample of a line to the first sample of
the next line.</div></div></div><div class="region" id="/h_stride.val"><a href="#/h_stride.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>h_stride : <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc"><code>h_stride r</code> is the number of <span style="font-style: italic">lines</span> to skip to go
from the first line of a plane to the first
line of the next plane.</div></div></div><div class="region" id="/sample_format.val"><a href="#/sample_format.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>sample_format : <a href="index.html#/t.typ">t</a> -&gt; <a href="Sample/index.html#/format.typ">Sample.format</a></div><div class="doc"><code>sample_format r</code> is <code>r</code>'s sample format.</div></div></div><div class="region" id="/buffer.val"><a href="#/buffer.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>buffer : <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/buffer.typ">buffer</a></div><div class="doc"><code>buffer r</code> is <code>r</code>'s format.</div></div></div><div class="doc"><h1 id="rsize">Raster sizes and boxes</h1><br/>In these functions have an optional <code>meter</code> argument that
defaults to <code>false</code>. If <code>false</code> the result is in integral number
of <span style="font-style: italic">samples</span>. If <code>true</code> the result is in <span style="font-style: italic">meters</span> according
to the rasters' res. If the raster has no
resolution, Raster.res_default is used in all dimensions.</div><div class="region" id="/wi.val"><a href="#/wi.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>wi : <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc"><code>wi r</code> is <code>r</code>'s index width in number of samples.</div></div></div><div class="region" id="/hi.val"><a href="#/hi.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>hi : <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc"><code>hi r</code> is <code>r</code>'s index height in number of samples.</div></div></div><div class="region" id="/di.val"><a href="#/di.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>di : <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc"><code>d r</code> is <code>r</code>'s index height in number of samples.</div></div></div><div class="region" id="/w.val"><a href="#/w.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>w : ?meters:bool -&gt; <a href="index.html#/t.typ">t</a> -&gt; float</div><div class="doc"><code>w r</code> is <code>r</code>'s index width.</div></div></div><div class="region" id="/h.val"><a href="#/h.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>h : ?meters:bool -&gt; <a href="index.html#/t.typ">t</a> -&gt; float</div><div class="doc"><code>h r</code> is <code>r</code>'s index height.</div></div></div><div class="region" id="/d.val"><a href="#/d.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>d : ?meters:bool -&gt; <a href="index.html#/t.typ">t</a> -&gt; float</div><div class="doc"><code>d r</code> is <code>r</code>'s index depth.</div></div></div><div class="region" id="/size1.val"><a href="#/size1.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>size1 : ?meters:bool -&gt; <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/size1.typ">size1</a></div><div class="doc"><code>size1 r</code> is <code>r</code>'s index width.</div></div></div><div class="region" id="/size2.val"><a href="#/size2.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>size2 : ?meters:bool -&gt; <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/size2.typ">size2</a></div><div class="doc"><code>size2 r</code> is <code>r</code>'s index width and height.</div></div></div><div class="region" id="/size3.val"><a href="#/size3.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>size3 : ?meters:bool -&gt; <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/size3.typ">size3</a></div><div class="doc"><code>size3 r</code> is <code>r</code>'s index width, height and depth.</div></div></div><div class="region" id="/box1.val"><a href="#/box1.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>box1 : ?meters:bool -&gt; ?mid:bool -&gt; ?o:float -&gt; <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/box1.typ">box1</a></div><div class="doc"><code>box1 meters mid o r</code> is a box with origin <code>o</code> and size <code>(size1
      meters r)</code>. If <code>mid</code> is <code>true</code> (defaults to <code>false</code>), <code>o</code>
specifies the mid point of the box. <code>o</code> defaults to 0.</div></div></div><div class="region" id="/box2.val"><a href="#/box2.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>box2 : ?meters:bool -&gt; ?mid:bool -&gt; ?o:<a href="../index.html#/p2.typ">p2</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/box2.typ">box2</a></div><div class="doc"><code>box2 meters mid o r</code> is a box with origin <code>o</code> and size <code>(size2
      meters r)</code>. If <code>mid</code> is <code>true</code> (defaults to <code>false</code>), <code>o</code>
specifies the mid point of the box. <code>o</code> defaults to P2.o.</div></div></div><div class="region" id="/box3.val"><a href="#/box3.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>box3 : ?meters:bool -&gt; ?mid:bool -&gt; ?o:<a href="../index.html#/p3.typ">p3</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; <a href="../index.html#/box3.typ">box3</a></div><div class="doc"><code>box3 meters mid o r</code> is a box with origin <code>o</code> and size
<code>(size3 meters r)</code>. If <code>mid</code> is <code>true</code> (defaults to <code>false</code>),
<code>o</code> specifies the mid point of the box. <code>o</code> defaults to P3.o.</div></div></div><div class="doc"><h1>Functions</h1></div><div class="region" id="/dim.val"><a href="#/dim.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>dim : <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc"><code>dim r</code> is <code>r</code>'s index dimension from 1 to 3. Note that
this is not derived from the case size given to v for creating <code>r</code>.
It is derived from the size <code>(w,h,d)</code> as follows: <code>(w,1,1)</code> means 1,
<code>(w,h,1)</code> with <code>h &gt; 1</code> means 2, <code>(w,h,d)</code> with <code>h,d &gt; 1</code> means 3.</div></div></div><div class="region" id="/kind.val"><a href="#/kind.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>kind : <a href="index.html#/t.typ">t</a> -&gt; [ `D1 | `D2 | `D3 ]</div><div class="doc"><code>kind r</code> is like dim but symbolically.</div></div></div><div class="region" id="/sub.val"><a href="#/sub.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>sub : [ `D1 of <a href="../index.html#/box1.typ">box1</a> | `D2 of <a href="../index.html#/box2.typ">box2</a> | `D3 of <a href="../index.html#/box3.typ">box3</a> ] -&gt; <a href="index.html#/t.typ">t</a> -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc"><code>sub region</code> is a raster corresponding to a subset of the
index of <code>r</code>. Both <code>r</code> and the resulting raster share
the same buffer. The integral origin of the box defines the
new sample origin of the raster data and its integral
size the new size of the index.<br/>If the dimension of the box is smaller than the raster the
result is in the first line (<code>y = 0</code>) and/or layer (<code>z = 0</code>) of
the raster <code>r</code>.</div></div></div><div class="region" id="/scalar_strides.val"><a href="#/scalar_strides.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>scalar_strides : <a href="index.html#/t.typ">t</a> -&gt; int * int * int</div><div class="doc"><code>scalar_strides r</code> is <code>(x_stride, y_stride, z_stride)</code> where
<ul><li><code>x_stride</code> is the number of buffer scalars from sample to sample.</li><li><code>y_stride</code> is the number of buffer scalars from line to line.</li><li><code>z_stride</code> is the number of buffer scalars from plane to plane.</li></ul>
The buffer index where the sample <code>(x,y,z)</code> starts is given by:
<pre>
(Raster.first r) + z * z_stride + y * y_stride + x * x_stride
</pre></div></div></div><div class="doc"><h1>Predicates and comparisons</h1></div><div class="region" id="/equal.val"><a href="#/equal.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>equal : <a href="index.html#/t.typ">t</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; bool</div><div class="doc"><code>equal r r'</code> is <code>r = r'</code>.</div></div></div><div class="region" id="/compare.val"><a href="#/compare.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>compare : <a href="index.html#/t.typ">t</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc"><code>compare r r'</code> is <code>Pervasives.compare r r'</code>.</div></div></div><div class="doc"><h1>Printers</h1></div><div class="region" id="/pp.val"><a href="#/pp.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pp : <a href="../../../ocaml/Format/index.html#/formatter.typ">Format.formatter</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; unit</div><div class="doc"><code>pp ppf t</code> prints a textual represenation of <code>t</code> on <code>ppf</code>. Doesn't
print the buffer samples.</div></div></div><div class="doc"><h1 id="resolution">Default resolution and conversions</h1></div><div class="region" id="/res_default.val"><a href="#/res_default.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>res_default : float</div><div class="doc"><code>res_default</code> is 11811spm (300spi).</div></div></div><div class="region" id="/spm_of_spi.val"><a href="#/spm_of_spi.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>spm_of_spi : float -&gt; float</div><div class="doc"><code>spm_of_spi spi</code> is the samples per meter corresponding to
the samples per inch <code>spi</code>.</div></div></div><div class="region" id="/spm_to_spi.val"><a href="#/spm_to_spi.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>spm_to_spi : float -&gt; float</div><div class="doc"><code>spm_to_spi spm</code> is the samples per inch corresponding to the
samples per meters <code>spm</code>.</div></div></div></div></div></div></body></html>