<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Gg (gg.Gg)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/></head><body><div class="odoc-doc"><a href="../index.html">Up</a><div class="intro"><h1><span class="keyword">Module </span><a href="../#/Gg">Gg</a></h1></div><div><div class="doc">Basic types for computer graphics.<br/><code>Gg</code> defines types and functions for <a href="Float/index.html">Float</a>,
vectors, points, matrices,
quaternions, sizes,
aboxes, colors,
Color:colorprofiles, bigarray
and
raster.<br/>Consult the basics. Open the module to use it, this
defines only modules and types in your scope.<br/><span style="font-style: italic">Release 0.9.1 - Daniel BÃ¼nzli &lt;daniel.buenzl i@erratique.ch&gt;</span></div><div><div class="doc"><h1 id="float">Floats</h1></div><div class="region" id="/Float"><a href="#/Float" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Float/index.html">Float</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Floating point number utilities.</div></div></div><div class="doc">The following type are defined so that they can be used
in vector modules. The matrix modules are matrices.</div><div class="region" id="/m2.typ"><a href="#/m2.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>m2</div><div class="doc">The type for 2x2 matrices.</div></div></div><div class="region" id="/m3.typ"><a href="#/m3.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>m3</div><div class="doc">The type for 3x3 matrices.</div></div></div><div class="region" id="/m4.typ"><a href="#/m4.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>m4</div><div class="doc">The type for 4x4 matrices.</div></div></div><div class="doc"><h1 id="vectors">Vectors</h1><br/>An n-dimensional <span style="font-style: italic">vector</span> <code>v</code> is a sequence of n, zero indexed,
floating point <span style="font-style: italic">components</span>. We write <code>v</code><sub>i</sub> the ith component
of a vector.</div><div class="region" id="/v2.typ"><a href="#/v2.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>v2</div><div class="doc">The type for 2D vectors.</div></div></div><div class="region" id="/v3.typ"><a href="#/v3.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>v3</div><div class="doc">The type for 3D vectors.</div></div></div><div class="region" id="/v4.typ"><a href="#/v4.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>v4</div><div class="doc">The type for 4D vectors.</div></div></div><div class="region" id="/V.modt"><a href="#/V.modt" class="anchor"></a><div class="modtype"><div class="def"><span class="keyword">module type </span><a href="V.modt/index.html">V</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Implemented by all vector types.</div></div></div><div class="region" id="/V2"><a href="#/V2" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="V2/index.html">V2</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/V3"><a href="#/V3" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="V3/index.html">V3</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/V4"><a href="#/V4" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="V4/index.html">V4</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="doc"><h1 id="points">Points</h1><br/>An n-dimensional <span style="font-style: italic">point</span> <code>p</code> is a vector of the corresponding
dimension. The components of the vector are the point's <span style="font-style: italic">coordinates</span>.</div><div class="region" id="/p2.typ"><a href="#/p2.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>p2 = <a href="index.html#/v2.typ">v2</a></div><div class="doc">The type for 2D points.</div></div></div><div class="region" id="/p3.typ"><a href="#/p3.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>p3 = <a href="index.html#/v3.typ">v3</a></div><div class="doc">The type for 3D points.</div></div></div><div class="region" id="/P.modt"><a href="#/P.modt" class="anchor"></a><div class="modtype"><div class="def"><span class="keyword">module type </span><a href="P.modt/index.html">P</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Implemented by all point types.</div></div></div><div class="region" id="/P2"><a href="#/P2" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="P2/index.html">P2</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/P3"><a href="#/P3" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="P3/index.html">P3</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="doc"><h1 id="quaternions">Quaternions</h1><br/>Unit <a href="http://mathworld.wolfram.com/Quaternion.html">quaternions</a>
represent rotations in 3D space. They allow to smoothly
interpolate between orientations. A quaternion is a 4D vector,
whose components <code>x</code>, <code>y</code>, <code>z</code>, <code>w</code> represents the quaternion
<code>x</code>i+ <code>y</code>j + <code>z</code>k + <code>w</code>.</div><div class="region" id="/quat.typ"><a href="#/quat.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>quat = <a href="index.html#/v4.typ">v4</a></div><div class="doc">The type for quaternions.</div></div></div><div class="region" id="/Quat"><a href="#/Quat" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Quat/index.html">Quat</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="doc"><h1 id="matrices">Matrices</h1><br/>An <span style="font-style: italic">m</span>x<span style="font-style: italic">n</span> matrix <code>a</code> is an array of <span style="font-style: italic">m</span> rows and <span style="font-style: italic">n</span>
columns of floating point <span style="font-style: italic">elements</span>. We write <code>a</code><sub>ij</sub> the
element of <code>a</code> located at the ith row and jth column.<br/>Matrix constructors specify matrix elements in
<a href="http://en.wikipedia.org/wiki/Row-major_order">row-major order</a>
so that matrix definitions look mathematically natural with proper
code indentation. However elements are <span style="font-style: italic">stored</span> and <span style="font-style: italic">iterated</span> over in
<a href="http://en.wikipedia.org/wiki/Column-major_order">column-major
order</a>.</div><div class="region" id="/M.modt"><a href="#/M.modt" class="anchor"></a><div class="modtype"><div class="def"><span class="keyword">module type </span><a href="M.modt/index.html">M</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Implemented by all (square) matrix types.</div></div></div><div class="region" id="/M2"><a href="#/M2" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="M2/index.html">M2</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/M3"><a href="#/M3" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="M3/index.html">M3</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/M4"><a href="#/M4" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="M4/index.html">M4</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="doc"><h1 id="sizes">Sizes</h1><br/>An n-dimensional <span style="font-style: italic">size</span> <code>s</code> represents extents in n-dimensional space.</div><div class="region" id="/size1.typ"><a href="#/size1.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>size1 = float</div><div class="doc">The type for sizes in 1D space.</div></div></div><div class="region" id="/size2.typ"><a href="#/size2.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>size2 = <a href="index.html#/v2.typ">v2</a></div><div class="doc">The type for sizes in 2D space.</div></div></div><div class="region" id="/size3.typ"><a href="#/size3.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>size3 = <a href="index.html#/v3.typ">v3</a></div><div class="doc">The type for sizes in 3D space.</div></div></div><div class="region" id="/Size.modt"><a href="#/Size.modt" class="anchor"></a><div class="modtype"><div class="def"><span class="keyword">module type </span><a href="Size.modt/index.html">Size</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Implemented by all size types.</div></div></div><div class="region" id="/Size1"><a href="#/Size1" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Size1/index.html">Size1</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/Size2"><a href="#/Size2" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Size2/index.html">Size2</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/Size3"><a href="#/Size3" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Size3/index.html">Size3</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="doc"><h1 id="aboxes">Axis-aligned boxes</h1><br/>An n-dimensional axis-aligned box <code>b</code> is defined by an
n-dimensional point <code>o</code>, its <span style="font-style: italic">origin</span>, and an n-dimensional size
<code>s</code>. Operations on boxes with negative sizes are undefined.<br/>The space S(<code>b</code>) spanned by <code>b</code> is [<code>o</code><sub>0</sub>;
<code>o</code><sub>0</sub> + <code>s</code><sub>0</sub>] x ... x [<code>o</code><sub>n-1</sub>; <code>o</code><sub>n-1</sub> +
<code>s</code><sub>n-1</sub>]. The extremum points of this space are the box's <span style="font-style: italic">corners</span>. There is a distinguished n-dimensional <code>empty</code> box such
that S(<code>empty</code>) is empty.</div><div class="region" id="/box1.typ"><a href="#/box1.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>box1</div><div class="doc">The type for 1D axis-aligned boxes
(<a href="http://mathworld.wolfram.com/Interval.html">closed intervals</a>).</div></div></div><div class="region" id="/box2.typ"><a href="#/box2.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>box2</div><div class="doc">The type for 2D axis-aligned boxes
(<a href="http://mathworld.wolfram.com/Rectangle.html">rectangles</a>).</div></div></div><div class="region" id="/box3.typ"><a href="#/box3.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>box3</div><div class="doc">The type for 3D axis-aligned boxes
(<a href="http://mathworld.wolfram.com/Cuboid.html">cuboids</a>).</div></div></div><div class="region" id="/Box.modt"><a href="#/Box.modt" class="anchor"></a><div class="modtype"><div class="def"><span class="keyword">module type </span><a href="Box.modt/index.html">Box</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Implemented by all axis-aligned box types.</div></div></div><div class="region" id="/Box1"><a href="#/Box1" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Box1/index.html">Box1</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/Box2"><a href="#/Box2" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Box2/index.html">Box2</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="region" id="/Box3"><a href="#/Box3" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Box3/index.html">Box3</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc"></div></div></div><div class="doc"><h1 id="colors">Colors</h1></div><div class="region" id="/color.typ"><a href="#/color.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>color = <a href="index.html#/v4.typ">v4</a></div><div class="doc">The type for colors, see <a href="Color/index.html#/t.typ">Color.t</a>.</div></div></div><div class="region" id="/Color"><a href="#/Color" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Color/index.html">Color</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Colors and color profiles.</div></div></div><div class="doc"><h1 id="bigarray">Linear bigarrays and bigarray buffers</h1></div><div class="region" id="/bigarray.typ"><a href="#/bigarray.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>('a, 'b) bigarray = ('a, 'b, Bigarray.c_layout) Bigarray.Array1.t</div><div class="doc">The type for linear bigarrays.</div></div></div><div class="region" id="/buffer.typ"><a href="#/buffer.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>buffer = [ `Int8 of (int, Bigarray.int8_signed_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `Int16 of (int, Bigarray.int16_signed_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `Int32 of (int32, Bigarray.int32_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `Int64 of (int64, Bigarray.int64_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `UInt8 of (int, Bigarray.int8_unsigned_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `UInt16 of (int, Bigarray.int16_unsigned_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `UInt32 of (int32, Bigarray.int32_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `UInt64 of (int64, Bigarray.int64_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `Float16 of (int, Bigarray.int16_unsigned_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `Float32 of (float, Bigarray.float32_elt) <a href="index.html#/bigarray.typ">bigarray</a> | `Float64 of (float, Bigarray.float64_elt) <a href="index.html#/bigarray.typ">bigarray</a> ]</div><div class="doc">The type for linear bigarray buffers.</div></div></div><div class="region" id="/Ba"><a href="#/Ba" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Ba/index.html">Ba</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Linear bigarrays and bigarray buffers.</div></div></div><div class="doc"><h1 id="raster">Raster data</h1></div><div class="region" id="/raster.typ"><a href="#/raster.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>raster</div><div class="doc">The type for raster data.</div></div></div><div class="region" id="/Raster"><a href="#/Raster" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Raster/index.html">Raster</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Raster data.</div></div></div><div class="doc"><h1 id="basics">Basics</h1><br/><code>Gg</code> is designed to be opened in your module. This defines only
types and modules in your scope, no values. Thus to use <code>Gg</code> start
with : <pre>open Gg</pre><br/>In the toplevel, if you installed <code>Gg</code> with ocamlfind, requiring
<code>Gg</code>:
<pre>
&gt; #require &quot;gg&quot;;;
</pre>
automatically opens <code>Gg</code> and installs printers for the types.<br/><h2 id="conventions">Conventions</h2><br/>Most types and their functions are defined with the following
conventions. The type is first defined in <code>Gg</code>, like <a href="index.html#/v2.typ">v2</a> for 2D
vectors, a module for it follows. The name of the module is
the type name capitalized, e.g. <a href="V2/index.html">V2</a> for 2D vectors and it has
the following definitions:
<ul><li>a type <code>t</code> equal to the original toplevel type (<a href="V2/index.html#/t.typ">V2.t</a>).</li><li><code>dim</code>, an <code>int</code> value that indicates the dimensionality
of the type (V2.dim).</li><li><code>v</code>, a constructor for the type (V2.v).</li><li><code>pp</code> to convert values to a textual representation for debugging
purposes and toplevel interaction V2.pp).</li><li><code>equal</code> and <code>compare</code> the standard functions that make a module
a good functor argument (V2.equal, V2.compare).</li><li><code>equal_f</code> and <code>compare_f</code> which compare
like <code>equal</code> and <code>compare</code> but allow to use a client provided
function to compare floats (V2.equal_f, V2.compare_f).</li><li><code>ltr</code> and <code>tr</code> to apply linear and affine transforms
on the type (V2.ltr, V2.tr).</li><li>Other accessors (e.g. V2.x), constants (e.g. V2.zero),
functions (e.g. V2.dot) and predicates (e.g. V2.exists)
specific to the type.</li><li>Modules that represent the same object but for different
dimensions, like <a href="V2/index.html">V2</a>, <a href="V3/index.html">V3</a>, <a href="V4/index.html">V4</a> for vectors, usually
share a common signature. This common
signature is collected in a module type defined in <code>Gg</code>,
this signature is <a href="V.modt/index.html">V</a> for vectors.</li></ul><br/>Some types are defined as simple abreviations. For example the
type <a href="index.html#/p2.typ">p2</a> for 2D points is equal to <a href="index.html#/v2.typ">v2</a>. These types also have
a module whose name is the type name capitalized, <a href="P2/index.html">P2</a> in our
example. However this module only provides alternate constructors,
constants and accessors and the extended functionality specific to the
type. You should fallback on the module of the abreviated type
(<a href="V2/index.html">V2</a> in our example) for other operations. The aim of these
types is to make your code and signatures semantically clearer
without the burden of explicit conversions.<br/>Finally there are some types and modules like <a href="Color/index.html">Color</a> whose structure
is different because they provide specific functionality.<br/>Here are a few other conventions :
<ul><li>Numbers in names indicate dimensionality. For example M4.scale3
indicates scale in 3D space while M4.scale4 scale in 4D space.</li><li>Most functions take the value they act upon first.
But exceptions abound, to match OCaml conventions, to have your
curry or to match mathematical notation (e.g. V2.tr).</li><li>Conversion functions follow the <code>of_</code> conventions. Thus to convert
a value of type <code>t'</code> to a value of type <code>t</code> look for the function
named <code>T.of_t'</code>.</li></ul><br/>To conclude note that it is sometimes hard to find the right place
for a function. If you cannot find a function look into each of
the modules of the types you want to act upon.<br/><h2 id="mathconv">Mathematical conventions</h2>
<ul><li>In 3D space we assume a
<a href="http://mathworld.wolfram.com/Right-HandedCoordinateSystem.html">right-handed</a> coordinate system.</li><li>Angles are always given in radians (except in
Float.rad_of_deg function...).</li><li>In 2D space positive angles determine counter clockwise rotations.</li><li>In 3D space positive angles determine rotations directed according to
the right hand rule.</li></ul><br/><h2 id="colornote">Note on colors</h2><br/>Values of type <a href="index.html#/color.typ">color</a> are in a <span style="font-style: italic">linear</span> sRGB space as this is
the space to work in if you want to process colors correctly (e.g.
for blending). The constructor Color.v_srgb takes its parameters
from a <span style="font-style: italic">non-linear</span> sRGB space and converts them to <span style="font-style: italic">linear</span>
sRGB.
<pre>
# let c = Color.v_srgb 0.5 0.5 0.5 1.0;;
- : Gg.color = (0.214041 0.214041 0.214041 1)
</pre>
This is the constructor you are likely to use when you specify color
constants (e.g. to specify a color value matching a CSS color).
If you need an sRGB color back from a <a href="index.html#/color.typ">color</a> value use Color.to_srgb:
<pre>
# Color.to_srgba c;;
- : Gg.Color.srgba = (0.5 0.5 0.5 1)
</pre><br/><h2 id="tipsremarks">Remarks and Tips</h2>
<ul><li>Everything is tail-recursive.</li><li>Do not rely on the output of printer functions, they are
subject to change. The only exception is the function
Float.pp that output a lossless textual representation of
floats. While the actual format is subject to change it will
remain compatible with <code>float_of_string</code>.</li><li>All modules can be directly given as arguments to <code>Set.Make</code>
and <code>Map.Make</code>. However this will use <code>Pervasives.compare</code> and
thus binary comparison between floats. Depending on the intended
use this may be sensible or not. Comparisons with alternate functions
to compare floats can be defined by using the functions named
<code>compare_f</code> (e.g. V2.compare_f). An alternate float comparison
function is Float.compare_tol
that combines relative and absolute float comparison in a single
test, see Float.equal_tol for the details.</li><li>For performance reasons some functions of the <a href="Float/index.html">Float</a> module
are undefined on certain arguments but do not raise <code>Invalid_argument</code>
on those. As usual do not rely on the behaviour of functions on undefined
arguments, these are subject to change.</li></ul></div></div></div></div></body></html>