<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make (hardcaml-lwttb.HardCamlLWTTB.Lwtsim.Make)</title><link rel="stylesheet" href="../../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0"/></head><body><nav><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../../../index.html">hardcaml-lwttb</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">HardCamlLWTTB.Lwtsim.Make</span></h1></header><h3 class="heading">Parameters</h3><div><div class="spec argument" id="argument-3-O"><a href="#argument-3-O" class="anchor"></a><div class="def argument"><code><a href="argument-3-O/index.html">O</a> : <a href="../../../../hardcaml/HardCaml/Interface/index.html#module-type-S">HardCaml.Interface.S</a></code></div><div class="doc"></div></div><div class="spec argument" id="argument-2-I"><a href="#argument-2-I" class="anchor"></a><div class="def argument"><code><a href="argument-2-I/index.html">I</a> : <a href="../../../../hardcaml/HardCaml/Interface/index.html#module-type-S">HardCaml.Interface.S</a></code></div><div class="doc"></div></div><div class="spec argument" id="argument-1-B"><a href="#argument-1-B" class="anchor"></a><div class="def argument"><code><a href="argument-1-B/index.html">B</a> : <a href="../../../../hardcaml/HardCaml/Comb/index.html#module-type-S">HardCaml.Comb.S</a></code></div><div class="doc"></div></div></div><h3 class="heading">Signature</h3><div class="spec include"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><a href="../../Tb/index.html#module-type-S">Tb.S</a><span class="keyword"> with </span><span class="keyword">type </span><a href="../../Tb/module-type-S/index.html#type-state">state</a><span class="keyword"> = </span>unit<span class="keyword"> and </span><span class="keyword">type </span><a href="../../Tb/module-type-S/index.html#type-b">b</a><span class="keyword"> = </span><a href="argument-1-B/index.html#type-t">B.t</a><span class="keyword"> and </span><span class="keyword">type </span>'a <a href="../../Tb/module-type-S/index.html#type-i">i</a><span class="keyword"> = </span><span class="type-var">'a</span> <a href="argument-2-I/index.html#type-t">I.t</a><span class="keyword"> and </span><span class="keyword">type </span>'a <a href="../../Tb/module-type-S/index.html#type-o">o</a><span class="keyword"> = </span><span class="type-var">'a</span> <a href="argument-3-O/index.html#type-t">O.t</a></code></span></summary><div class="spec type" id="type-state"><a href="#type-state" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>state</code><code><span class="keyword"> = </span>unit</code><code></code></div><div class="doc"><p>simulation state type</p></div></div><div class="spec type" id="type-b"><a href="#type-b" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>b</code><code><span class="keyword"> = </span><a href="argument-1-B/index.html#type-t">B.t</a></code><code></code></div><div class="doc"><p>bit vector type used to implement simulator calculations</p></div></div><div class="spec type" id="type-i"><a href="#type-i" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a i</code><code><span class="keyword"> = </span><span class="type-var">'a</span> <a href="argument-2-I/index.html#type-t">I.t</a></code><code></code></div><div class="doc"><p>circuit inputs</p></div></div><div class="spec type" id="type-o"><a href="#type-o" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>'a o</code><code><span class="keyword"> = </span><span class="type-var">'a</span> <a href="argument-3-O/index.html#type-t">O.t</a></code><code></code></div><div class="doc"><p>circuit outputs</p></div></div><div class="spec type" id="type-reset"><a href="#type-reset" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>reset</code><code><span class="keyword"> = </span>unit<span class="keyword"> -&gt; </span><a href="index.html#type-state">state</a></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-cycle"><a href="#type-cycle" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>cycle</code><code><span class="keyword"> = </span><a href="index.html#type-state">state</a><span class="keyword"> -&gt; </span><a href="index.html#type-b">b</a> <a href="index.html#type-i">i</a><span class="keyword"> -&gt; </span><a href="index.html#type-state">state</a><span class="keyword"> * </span><a href="index.html#type-b">b</a> <a href="index.html#type-o">o</a><span class="keyword"> * </span><a href="index.html#type-b">b</a> <a href="index.html#type-o">o</a></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-task_req"><a href="#type-task_req" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>task_req</code><code></code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code><span class="keyword"> = </span><span class="keyword">private </span></code><code>{</code><table class="record"><tr id="type-t.vreq" class="anchored"><td class="def field"><a href="#type-t.vreq" class="anchor"></a><code>vreq : <a href="index.html#type-task_req">task_req</a> Lwt_mvar.t;</code></td></tr><tr id="type-t.vresp" class="anchored"><td class="def field"><a href="#type-t.vresp" class="anchor"></a><code>vresp : (<a href="index.html#type-b">b</a> <a href="index.html#type-o">o</a><span class="keyword"> * </span><a href="index.html#type-b">b</a> <a href="index.html#type-o">o</a>) Lwt_mvar.t;</code></td></tr><tr id="type-t.children" class="anchored"><td class="def field"><a href="#type-t.children" class="anchor"></a><code>children : <a href="index.html#type-t">t</a> list;</code></td></tr><tr id="type-t.inputs" class="anchored"><td class="def field"><a href="#type-t.inputs" class="anchor"></a><code>inputs : <a href="index.html#type-b">b</a> option <a href="index.html#type-i">i</a>;</code></td></tr><tr id="type-t.log" class="anchored"><td class="def field"><a href="#type-t.log" class="anchor"></a><code>log : <a href="index.html#type-log">log</a> option;</code></td></tr></table><code>}</code><code></code></div><div class="doc"><p>simulation testbench data type</p></div></div><div class="spec type" id="type-log"><a href="#type-log" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>log</code><code><span class="keyword"> = </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span>unit Lwt.t</code><code></code></div><div class="doc"></div></div><div class="spec type" id="type-task"><a href="#type-task" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>task</code><code><span class="keyword"> = </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a> Lwt.t</code><code></code></div><div class="doc"><p>type of simulation tasks synchronised to the clock</p></div></div><div class="spec val" id="val-cycle1"><a href="#val-cycle1" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>cycle1 : <a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span>(<a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-b">b</a> <a href="index.html#type-o">o</a><span class="keyword"> * </span><a href="index.html#type-b">b</a> <a href="index.html#type-o">o</a>) Lwt.t</code></div><div class="doc"><p>cycle the clock, return circuit outputs</p></div></div><div class="spec val" id="val-cycle"><a href="#val-cycle" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>cycle : ?n:int<span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span>(<a href="index.html#type-t">t</a><span class="keyword"> * </span><a href="index.html#type-b">b</a> <a href="index.html#type-o">o</a><span class="keyword"> * </span><a href="index.html#type-b">b</a> <a href="index.html#type-o">o</a>) Lwt.t</code></div><div class="doc"><p>cycle the clock n&gt;=1 times</p></div></div><div class="spec val" id="val-spawn"><a href="#val-spawn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>spawn : ?log:<a href="index.html#type-log">log</a><span class="keyword"> -&gt; </span><a href="index.html#type-task">task</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p>spawn a new simulation task synchronised to each cycle</p></div></div><div class="spec val" id="val-repeat"><a href="#val-repeat" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>repeat : int<span class="keyword"> -&gt; </span><a href="index.html#type-task">task</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p><code class="code">repeat n task sim</code> repeats the task n times</p></div></div><div class="spec val" id="val-delay"><a href="#val-delay" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>delay : int<span class="keyword"> -&gt; </span><a href="index.html#type-task">task</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p><code class="code">delay n task sim</code> delay for n cycles then run task</p></div></div><div class="spec val" id="val-return"><a href="#val-return" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>return : <span class="type-var">'a</span><span class="keyword"> -&gt; </span><span class="type-var">'a</span> Lwt.t</code></div><div class="doc"><p><code class="code">Lwt.return</code></p></div></div><div class="spec val" id="val-return_cycle"><a href="#val-return_cycle" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>return_cycle : <a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p>perform a simulation cycle and return</p></div></div><h3>setting circuit inputs</h3><div class="spec val" id="val-i"><a href="#val-i" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>i : bool <a href="index.html#type-i">i</a> <a href="index.html#type-i">i</a></code></div><div class="doc"><p>input field accessors</p></div></div><div class="spec val" id="val-inone"><a href="#val-inone" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>inone : <a href="index.html#type-b">b</a> option <a href="index.html#type-i">i</a></code></div><div class="doc"><p>input structure with all fields set to none</p></div></div><div class="spec val" id="val-set"><a href="#val-set" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>set : bool <a href="index.html#type-i">i</a><span class="keyword"> -&gt; </span><a href="index.html#type-b">b</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p>set an input field</p></div></div><div class="spec val" id="val-setsome"><a href="#val-setsome" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>setsome : <a href="index.html#type-b">b</a> option <a href="index.html#type-i">i</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p>set some inputs</p></div></div><div class="spec val" id="val-setall"><a href="#val-setall" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>setall : <a href="index.html#type-b">b</a> <a href="index.html#type-i">i</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a><span class="keyword"> -&gt; </span><a href="index.html#type-t">t</a> Lwt.t</code></div><div class="doc"><p>set all inputs</p></div></div><h3>testbench simulation</h3><div class="spec val" id="val-run"><a href="#val-run" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>run : ?log:<a href="index.html#type-log">log</a><span class="keyword"> -&gt; </span>(<a href="index.html#type-reset">reset</a><span class="keyword"> * </span><a href="index.html#type-cycle">cycle</a>)<span class="keyword"> -&gt; </span><a href="index.html#type-task">task</a><span class="keyword"> -&gt; </span>unit Lwt.t</code></div><div class="doc"><p>run testbench</p></div></div></details><div class="doc"></div></div><div class="spec val" id="val-make"><a href="#val-make" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>make : string<span class="keyword"> -&gt; </span>(<a href="../../../../hardcaml/HardCaml__Signal/Comb/index.html#type-t">HardCaml.Signal.Comb.t</a> <a href="argument-2-I/index.html#type-t">I.t</a><span class="keyword"> -&gt; </span><a href="../../../../hardcaml/HardCaml__Signal/Comb/index.html#type-t">HardCaml.Signal.Comb.t</a> <a href="argument-3-O/index.html#type-t">O.t</a>)<span class="keyword"> -&gt; </span>(unit<span class="keyword"> -&gt; </span>unit)<span class="keyword"> * </span>(unit<span class="keyword"> -&gt; </span><a href="argument-1-B/index.html#type-t">B.t</a> <a href="argument-2-I/index.html#type-t">I.t</a><span class="keyword"> -&gt; </span>unit<span class="keyword"> * </span><a href="argument-1-B/index.html#type-t">B.t</a> <a href="argument-3-O/index.html#type-t">O.t</a><span class="keyword"> * </span><a href="argument-1-B/index.html#type-t">B.t</a> <a href="argument-3-O/index.html#type-t">O.t</a>)</code></div><div class="doc"></div></div></body></html>