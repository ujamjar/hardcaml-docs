<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_bytes (lwt.Lwt_bytes)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/></head><body><div class="odoc-doc"><a href="../index.html">Up</a><div class="intro"><h1><span class="keyword">Module </span><a href="../#/Lwt_bytes">Lwt_bytes</a></h1></div><div><div class="doc">Byte arrays</div><div><div class="region" id="/t.typ"><a href="#/t.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>t = (char, Bigarray.int8_unsigned_elt, Bigarray.c_layout) Bigarray.Array1.t</div><div class="doc">Type of array of bytes.</div></div></div><div class="region" id="/create.val"><a href="#/create.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>create : int -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc">Creates a new byte array of the given size.</div></div></div><div class="region" id="/length.val"><a href="#/length.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>length : <a href="index.html#/t.typ">t</a> -&gt; int</div><div class="doc">Returns the length of the given byte array.</div></div></div><div class="doc"><h2>Access</h2></div><div class="region" id="/get.val"><a href="#/get.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>get : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; char</div><div class="doc"><code>get buffer offset</code> returns the byte at offset <code>offset</code> in
<code>buffer</code>.</div></div></div><div class="region" id="/set.val"><a href="#/set.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>set : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; char -&gt; unit</div><div class="doc"><code>get buffer offset value</code> changes the value of the byte at
offset <code>offset</code> in <code>buffer</code> to <code>value</code>.</div></div></div><div class="region" id="/unsafe_get.val"><a href="#/unsafe_get.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>unsafe_get : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; char</div><div class="doc">Same as get but without bounds checking.</div></div></div><div class="region" id="/unsafe_set.val"><a href="#/unsafe_set.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>unsafe_set : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; char -&gt; unit</div><div class="doc">Same as set but without bounds checking.</div></div></div><div class="doc"><h2>Conversions</h2></div><div class="region" id="/of_bytes.val"><a href="#/of_bytes.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>of_bytes : <a href="../../ocaml/Bytes/index.html#/t.typ">Bytes.t</a> -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc"><code>of_bytes buf</code> returns a newly allocated byte array with the
same contents as <code>buf</code>.</div></div></div><div class="region" id="/of_string.val"><a href="#/of_string.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>of_string : string -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc"><code>of_string buf</code> returns a newly allocated byte array with the
same contents as <code>buf</code>.</div></div></div><div class="region" id="/to_bytes.val"><a href="#/to_bytes.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>to_bytes : <a href="index.html#/t.typ">t</a> -&gt; <a href="../../ocaml/Bytes/index.html#/t.typ">Bytes.t</a></div><div class="doc"><code>to_bytes buf</code> returns newly allocated bytes with the same
contents as <code>buf</code>.</div></div></div><div class="region" id="/to_string.val"><a href="#/to_string.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>to_string : <a href="index.html#/t.typ">t</a> -&gt; string</div><div class="doc"><code>to_string buf</code> returns a newly allocated string with the same
contents as <code>buf</code>.</div></div></div><div class="doc"><h2>Copying</h2></div><div class="region" id="/blit.val"><a href="#/blit.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>blit : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; unit</div><div class="doc"><code>blit buf1 ofs1 buf2 ofs2 len</code> copies <code>len</code> bytes from <code>buf1</code>
starting at offset <code>ofs1</code> to <code>buf2</code> starting at offset <code>ofs2</code>.</div></div></div><div class="region" id="/blit_from_bytes.val"><a href="#/blit_from_bytes.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>blit_from_bytes : <a href="../../ocaml/Bytes/index.html#/t.typ">Bytes.t</a> -&gt; int -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; unit</div><div class="doc">Same as blit but the first buffer is a string instead of a byte
array.</div></div></div><div class="region" id="/blit_to_bytes.val"><a href="#/blit_to_bytes.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>blit_to_bytes : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; <a href="../../ocaml/Bytes/index.html#/t.typ">Bytes.t</a> -&gt; int -&gt; int -&gt; unit</div><div class="doc">Same as blit but the second buffer is a string instead of a byte
array.</div></div></div><div class="region" id="/unsafe_blit.val"><a href="#/unsafe_blit.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>unsafe_blit : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; unit</div><div class="doc">Same as blit but without bound checking.</div></div></div><div class="region" id="/unsafe_blit_from_bytes.val"><a href="#/unsafe_blit_from_bytes.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>unsafe_blit_from_bytes : <a href="../../ocaml/Bytes/index.html#/t.typ">Bytes.t</a> -&gt; int -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; unit</div><div class="doc">Same as blit_string_bytes but without bounds checking.</div></div></div><div class="region" id="/unsafe_blit_to_bytes.val"><a href="#/unsafe_blit_to_bytes.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>unsafe_blit_to_bytes : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; <a href="../../ocaml/Bytes/index.html#/t.typ">Bytes.t</a> -&gt; int -&gt; int -&gt; unit</div><div class="doc">Same as blit_bytes_string but without bounds checking.</div></div></div><div class="region" id="/proxy.val"><a href="#/proxy.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>proxy : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc"><code>proxy buffer offset length</code> creates a ``proxy''. The returned
byte array share the data of <code>buffer</code> but with different
bounds.</div></div></div><div class="region" id="/extract.val"><a href="#/extract.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>extract : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc"><code>extract buffer offset length</code> creates a new byte array of
length <code>length</code> and copy the <code>length</code> bytes of <code>buffer</code> at
<code>offset</code> into it.</div></div></div><div class="region" id="/copy.val"><a href="#/copy.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>copy : <a href="index.html#/t.typ">t</a> -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc"><code>copy buffer</code> creates a copy of the given byte array.</div></div></div><div class="doc"><h2>Filling</h2></div><div class="region" id="/fill.val"><a href="#/fill.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>fill : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; char -&gt; unit</div><div class="doc"><code>fill buffer offset length value</code> puts <code>value</code> in all <code>length</code>
bytes of <code>buffer</code> starting at offset <code>offset</code>.</div></div></div><div class="region" id="/unsafe_fill.val"><a href="#/unsafe_fill.val" class="anchor"></a><div class="external"><div class="def"><span class="keyword">external </span>unsafe_fill : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; char -&gt; unit = &quot;lwt_unix_fill_bytes&quot;&quot;noalloc&quot;</div><div class="doc">Same as fill but without bounds checking.</div></div></div><div class="doc"><h2>IOs</h2></div><div class="doc">The following functions behave similarly to the ones in
Lwt_unix except they use byte arrays instead of
strings.</div><div class="region" id="/read.val"><a href="#/read.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>read : <a href="../Lwt_unix/index.html#/file_descr.typ">Lwt_unix.file_descr</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; int <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/write.val"><a href="#/write.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>write : <a href="../Lwt_unix/index.html#/file_descr.typ">Lwt_unix.file_descr</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; int <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/recv.val"><a href="#/recv.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>recv : <a href="../Lwt_unix/index.html#/file_descr.typ">Lwt_unix.file_descr</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; Unix.msg_flag list -&gt; int <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/send.val"><a href="#/send.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>send : <a href="../Lwt_unix/index.html#/file_descr.typ">Lwt_unix.file_descr</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; Unix.msg_flag list -&gt; int <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/recvfrom.val"><a href="#/recvfrom.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>recvfrom : <a href="../Lwt_unix/index.html#/file_descr.typ">Lwt_unix.file_descr</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; Unix.msg_flag list -&gt; (int * Unix.sockaddr) <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/sendto.val"><a href="#/sendto.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>sendto : <a href="../Lwt_unix/index.html#/file_descr.typ">Lwt_unix.file_descr</a> -&gt; <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; Unix.msg_flag list -&gt; Unix.sockaddr -&gt; int <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/io_vector.typ"><a href="#/io_vector.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>io_vector = {<table><tr class="fld"><td><div class="region" id="/io_vector.typ/iov_buffer.fld"><a href="#/io_vector.typ/iov_buffer.fld" class="anchor"></a>iov_buffer</div></td><td> : </td><td><a href="index.html#/t.typ">t</a>;</td></tr><tr class="fld"><td><div class="region" id="/io_vector.typ/iov_offset.fld"><a href="#/io_vector.typ/iov_offset.fld" class="anchor"></a>iov_offset</div></td><td> : </td><td>int;</td></tr><tr class="fld"><td><div class="region" id="/io_vector.typ/iov_length.fld"><a href="#/io_vector.typ/iov_length.fld" class="anchor"></a>iov_length</div></td><td> : </td><td>int;</td></tr></table>}</div><div class="doc"></div></div></div><div class="region" id="/io_vector.val"><a href="#/io_vector.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>io_vector : buffer:<a href="index.html#/t.typ">t</a> -&gt; offset:int -&gt; length:int -&gt; <a href="index.html#/io_vector.typ">io_vector</a></div><div class="doc"></div></div></div><div class="region" id="/recv_msg.val"><a href="#/recv_msg.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>recv_msg : socket:<a href="../Lwt_unix/index.html#/file_descr.typ">Lwt_unix.file_descr</a> -&gt; io_vectors:<a href="index.html#/io_vector.typ">io_vector</a> list -&gt; (int * Unix.file_descr list) <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc">This call is not available on windows.</div></div></div><div class="region" id="/send_msg.val"><a href="#/send_msg.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>send_msg : socket:<a href="../Lwt_unix/index.html#/file_descr.typ">Lwt_unix.file_descr</a> -&gt; io_vectors:<a href="index.html#/io_vector.typ">io_vector</a> list -&gt; fds:Unix.file_descr list -&gt; int <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc">This call is not available on windows.</div></div></div><div class="doc"><h2>Memory mapped files</h2></div><div class="region" id="/map_file.val"><a href="#/map_file.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>map_file : fd:Unix.file_descr -&gt; ?pos:int64 -&gt; shared:bool -&gt; ?size:int -&gt; unit -&gt; <a href="index.html#/t.typ">t</a></div><div class="doc"><code>map_file ~fd ?pos ~shared ?size ()</code> maps the file descriptor
<code>fd</code> to an array of bytes.</div></div></div><div class="region" id="/mapped.val"><a href="#/mapped.val" class="anchor"></a><div class="external"><div class="def"><span class="keyword">external </span>mapped : <a href="index.html#/t.typ">t</a> -&gt; bool = &quot;lwt_unix_mapped&quot;&quot;noalloc&quot;</div><div class="doc"><code>mapped buffer</code> returns <code>true</code> iff <code>buffer</code> is a memory mapped
file.</div></div></div><div class="region" id="/advice.typ"><a href="#/advice.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>advice = <table><tr class="cons"><td><div class="region" id="/advice.typ/MADV_NORMAL.cons"><a href="#/advice.typ/MADV_NORMAL.cons" class="anchor"></a>| MADV_NORMAL</div></td></tr><tr class="cons"><td><div class="region" id="/advice.typ/MADV_RANDOM.cons"><a href="#/advice.typ/MADV_RANDOM.cons" class="anchor"></a>| MADV_RANDOM</div></td></tr><tr class="cons"><td><div class="region" id="/advice.typ/MADV_SEQUENTIAL.cons"><a href="#/advice.typ/MADV_SEQUENTIAL.cons" class="anchor"></a>| MADV_SEQUENTIAL</div></td></tr><tr class="cons"><td><div class="region" id="/advice.typ/MADV_WILLNEED.cons"><a href="#/advice.typ/MADV_WILLNEED.cons" class="anchor"></a>| MADV_WILLNEED</div></td></tr><tr class="cons"><td><div class="region" id="/advice.typ/MADV_DONTNEED.cons"><a href="#/advice.typ/MADV_DONTNEED.cons" class="anchor"></a>| MADV_DONTNEED</div></td></tr></table></div><div class="doc">Type of advise that can be sent to the kernel by the program. See
the manual madvise(2) for a description of each.</div></div></div><div class="region" id="/madvise.val"><a href="#/madvise.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>madvise : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; int -&gt; <a href="index.html#/advice.typ">advice</a> -&gt; unit</div><div class="doc"><code>madvise buffer pos len advice</code> advises the kernel how the
program will use the memory mapped file between <code>pos</code> and
<code>pos + len</code>.<br/>This call is not available on windows.</div></div></div><div class="region" id="/page_size.val"><a href="#/page_size.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>page_size : int</div><div class="doc">Size of pages.</div></div></div><div class="region" id="/mincore.val"><a href="#/mincore.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>mincore : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; bool array -&gt; unit</div><div class="doc"><code>mincore buffer offset states</code> tests whether the given pages are
in the system memory (the RAM). The <code>offset</code> argument must be a
multiple of page_size. <code>states</code> is used to store the result;
each cases is <code>true</code> if the corresponding page is in RAM and
<code>false</code> otherwise.<br/>This call is not available on windows and cygwin.</div></div></div><div class="region" id="/wait_mincore.val"><a href="#/wait_mincore.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>wait_mincore : <a href="index.html#/t.typ">t</a> -&gt; int -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"><code>wait_mincore buffer offset</code> waits until the page containing the
byte at offset <code>offset</code> is in RAM.<br/>This functions is not available on windows and cygwin.</div></div></div></div></div></div></body></html>