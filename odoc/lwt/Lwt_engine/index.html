<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_engine (lwt.Lwt_engine)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/></head><body><div class="odoc-doc"><a href="../index.html">Up</a><div class="intro"><h1><span class="keyword">Module </span><a href="../#/Lwt_engine">Lwt_engine</a></h1></div><div><div class="doc">Lwt unix main loop engine</div><div><div class="doc"><h2>Events</h2></div><div class="region" id="/event.typ"><a href="#/event.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>event</div><div class="doc">Type of events. An event represent a callback registered to be
called when some event occurs.</div></div></div><div class="region" id="/stop_event.val"><a href="#/stop_event.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>stop_event : <a href="index.html#/event.typ">event</a> -&gt; unit</div><div class="doc"><code>stop_event event</code> stops the given event.</div></div></div><div class="region" id="/fake_event.val"><a href="#/fake_event.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>fake_event : <a href="index.html#/event.typ">event</a></div><div class="doc">Event which does nothing when stopped.</div></div></div><div class="doc"><h2>Event loop functions</h2></div><div class="region" id="/iter.val"><a href="#/iter.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>iter : bool -&gt; unit</div><div class="doc"><code>iter block</code> performs one iteration of the main loop. If <code>block</code>
is <code>true</code> the function must block until one event becomes
available, otherwise it should just check for available events
and return immediately.</div></div></div><div class="region" id="/on_readable.val"><a href="#/on_readable.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>on_readable : Unix.file_descr -&gt; (<a href="index.html#/event.typ">event</a> -&gt; unit) -&gt; <a href="index.html#/event.typ">event</a></div><div class="doc"><code>on_readable fd f</code> calls <code>f</code> each time <code>fd</code> becomes readable.</div></div></div><div class="region" id="/on_writable.val"><a href="#/on_writable.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>on_writable : Unix.file_descr -&gt; (<a href="index.html#/event.typ">event</a> -&gt; unit) -&gt; <a href="index.html#/event.typ">event</a></div><div class="doc"><code>on_readable fd f</code> calls <code>f</code> each time <code>fd</code> becomes writable.</div></div></div><div class="region" id="/on_timer.val"><a href="#/on_timer.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>on_timer : float -&gt; bool -&gt; (<a href="index.html#/event.typ">event</a> -&gt; unit) -&gt; <a href="index.html#/event.typ">event</a></div><div class="doc"><code>on_timer delay repeat f</code> calls <code>f</code> one time after <code>delay</code>
seconds. If <code>repeat</code> is <code>true</code> then <code>f</code> is called each <code>delay</code>
seconds, otherwise it is called only one time.</div></div></div><div class="region" id="/readable_count.val"><a href="#/readable_count.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>readable_count : unit -&gt; int</div><div class="doc">Returns the number of events waiting for a file descriptor to
become readable.</div></div></div><div class="region" id="/writable_count.val"><a href="#/writable_count.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>writable_count : unit -&gt; int</div><div class="doc">Returns the number of events waiting for a file descriptor to
become writable.</div></div></div><div class="region" id="/timer_count.val"><a href="#/timer_count.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>timer_count : unit -&gt; int</div><div class="doc">Returns the number of registered timers.</div></div></div><div class="region" id="/fake_io.val"><a href="#/fake_io.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>fake_io : Unix.file_descr -&gt; unit</div><div class="doc">Simulates activity on the given file descriptor.</div></div></div><div class="doc"><h2>Engines</h2></div><div class="doc">An engine represents a set of functions used to register different
kinds of callbacks for different kinds of events.</div><div class="class"><div class="def"><span class="keyword">class </span>abstract</div><div class="doc">Abstract class for engines.</div></div><div class="classtype"><div class="def"><span class="keyword">class type </span>t</div><div class="doc">Type of engines.</div></div><div class="doc"><h2>Predefined engines</h2></div><div class="region" id="/ev_loop.typ"><a href="#/ev_loop.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>ev_loop</div><div class="doc">Type of libev loops.</div></div></div><div class="class"><div class="def"><span class="keyword">class </span>libev</div><div class="doc">Engine based on libev. If not compiled with libev support, the
creation of the class will raise Lwt_sys.Not_available.</div></div><div class="class"><div class="def"><span class="keyword">class </span>select</div><div class="doc">Engine based on <code>Unix.select</code>.</div></div><div class="class"><div class="def"><span class="keyword">class </span>select_based</div><div class="doc">Abstract class for engines based on a select-like function.</div></div><div class="class"><div class="def"><span class="keyword">class </span>poll_based</div><div class="doc">Abstract class for engines based on a poll-like function.</div></div><div class="doc"><h2>The current engine</h2></div><div class="region" id="/get.val"><a href="#/get.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>get : unit -&gt; t</div><div class="doc"><code>get ()</code> returns the engine currently in use.</div></div></div><div class="region" id="/set.val"><a href="#/set.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>set : ?transfer:bool -&gt; ?destroy:bool -&gt; t -&gt; unit</div><div class="doc"><code>set ?transfer ?destroy engine</code> replaces the current engine by
the given one.<br/>If <code>transfer</code> is <code>true</code> (the default) all events from the
current engine are transferred to the new one.<br/>If <code>destroy</code> is <code>true</code> (the default) then the current engine is
destroyed before being replaced.</div></div></div></div></div></div></body></html>