<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_gc (lwt.Lwt_gc)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/></head><body><div class="odoc-doc"><a href="../index.html">Up</a><div class="intro"><h1><span class="keyword">Module </span><a href="../#/Lwt_gc">Lwt_gc</a></h1></div><div><div class="doc">Interaction with the garbage collector</div><div><div class="doc">This module offers a convenient way to add a finaliser launching a
thread to a value, without having to use <code>Lwt_unix.run</code> in the
finaliser.</div><div class="region" id="/finalise.val"><a href="#/finalise.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>finalise : ('a -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) -&gt; 'a -&gt; unit</div><div class="doc"><code>finalise f x</code> ensures <code>f x</code> is evaluated after <code>x</code> has been
garbage collected. If <code>f x</code> yields, then Lwt will wait for its
termination at the end of the program.<br/>Note that <code>f x</code> is not called at garbage collection time, but
later in the main loop.</div></div></div><div class="region" id="/finalise_or_exit.val"><a href="#/finalise_or_exit.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>finalise_or_exit : ('a -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) -&gt; 'a -&gt; unit</div><div class="doc"><code>finalise_or_exit f x</code> call <code>f x</code> when <code>x</code> is garbage collected
or (exclusively) when the program exits.</div></div></div></div></div></div></body></html>