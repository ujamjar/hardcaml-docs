<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_main (lwt.Lwt_main)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/></head><body><div class="odoc-doc"><a href="../index.html">Up</a><div class="intro"><h1><span class="keyword">Module </span><a href="../#/Lwt_main">Lwt_main</a></h1></div><div><div class="doc">Main loop and event queue</div><div><div class="doc">This module controls the ``main-loop'' of Lwt.</div><div class="region" id="/run.val"><a href="#/run.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>run : 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a> -&gt; 'a</div><div class="doc"><code>run t</code> calls the Lwt scheduler repeatedly until <code>t</code> terminates,
then returns the value returned by the thread. It <code>t</code> fails with
an exception, this exception is raised.<br/>Note that you should avoid using <code>run</code> inside threads
<ul><li>The calling threads will not resume before <code>run</code>
returns.</li><li>Successive invocations of <code>run</code> are serialized: an
invocation of <code>run</code> will not terminate before all
subsequent invocations are terminated.</li></ul>Note also that it is not safe to call <code>run</code> in a function
registered with <code>Pervasives.at_exit</code>, use the at_exit
function of this module instead.</div></div></div><div class="region" id="/yield.val"><a href="#/yield.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>yield : unit -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"><code>yield ()</code> is a threads which suspends itself and then resumes
as soon as possible and terminates.</div></div></div><div class="region" id="/enter_iter_hooks.val"><a href="#/enter_iter_hooks.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>enter_iter_hooks : (unit -&gt; unit) <a href="../Lwt_sequence/index.html#/t.typ">Lwt_sequence.t</a></div><div class="doc">Functions that are called before the main iteration.</div></div></div><div class="region" id="/leave_iter_hooks.val"><a href="#/leave_iter_hooks.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>leave_iter_hooks : (unit -&gt; unit) <a href="../Lwt_sequence/index.html#/t.typ">Lwt_sequence.t</a></div><div class="doc">Functions that are called after the main iteration.</div></div></div><div class="region" id="/exit_hooks.val"><a href="#/exit_hooks.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>exit_hooks : (unit -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) <a href="../Lwt_sequence/index.html#/t.typ">Lwt_sequence.t</a></div><div class="doc">Sets of functions executed just before the program exit.<br/>Notes:
<ul><li>each hook is called exactly one time</li><li>exceptions raised by hooks are ignored</li></ul></div></div></div><div class="region" id="/at_exit.val"><a href="#/at_exit.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>at_exit : (unit -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) -&gt; unit</div><div class="doc"><code>at_exit hook</code> adds hook at the left of <code>exit_hooks</code></div></div></div></div></div></div></body></html>