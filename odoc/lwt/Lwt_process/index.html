<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Lwt_process (lwt.Lwt_process)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/></head><body><div class="odoc-doc"><a href="../index.html">Up</a><div class="intro"><h1><span class="keyword">Module </span><a href="../#/Lwt_process">Lwt_process</a></h1></div><div><div class="doc">Process management</div><div><div class="doc">This module allows you to spawn processes and communicate with them.</div><div class="region" id="/command.typ"><a href="#/command.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>command = string * string array</div><div class="doc">A command. The first field is the name of the executable and
the second is the list of arguments. For example:<br/><pre>
          (&quot;ls&quot;, [|&quot;ls&quot;; &quot;-l&quot;|])
        </pre>.<br/>Notes:<br/><ul><li>if the name is the empty string, then the first argument
will be used. You should specify a name only if you do not
want the executable to be searched in the PATH. On Windows the
only way to enable automatic seach in PATH is to pass an empty
name.</li></ul><ul><li>it is possible to ``inline'' an argument, i.e. split it into
multiple arguments. To do that prefix it with <code>&quot;\000&quot;</code>. For
example:</li></ul><pre>
          (&quot;&quot;, [|&quot;echo&quot;; &quot;\000foo bar&quot;|])
        </pre><br/>is the same as:<br/><pre>
          (&quot;&quot;, [|&quot;echo&quot;; &quot;foo&quot;; &quot;bar&quot;|])
        </pre>.</div></div></div><div class="region" id="/shell.val"><a href="#/shell.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>shell : string -&gt; <a href="index.html#/command.typ">command</a></div><div class="doc">A command executed with the shell. (with <code>&quot;/bin/sh -c &lt;cmd&gt;&quot;</code> on
Unix and <code>&quot;cmd.exe /c &lt;cmd&gt;&quot;</code> on Windows).</div></div></div><div class="doc">All the following functions take an optional argument
<code>timeout</code>. If specified, after expiration, the process will be
sent a <code>Unix.sigkill</code> signal and channels will be closed.</div><div class="doc"><h2>High-level functions</h2></div><div class="doc"><h3>Redirections</h3></div><div class="region" id="/redirection.typ"><a href="#/redirection.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>redirection = [ `Keep | `Dev_null | `Close | `FD_copy of Unix.file_descr | `FD_move of Unix.file_descr ]</div><div class="doc">A file descriptor redirection. It describes how standard file
descriptors are redirected in the child process.</div></div></div><div class="doc">Note: all optional redirection arguments default to <code>`Keep</code></div><div class="doc"><h3>Executing</h3></div><div class="region" id="/exec.val"><a href="#/exec.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>exec : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; Unix.process_status <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc">Executes the given command and returns its exit status.</div></div></div><div class="doc"><h3>Receiving</h3></div><div class="region" id="/pread.val"><a href="#/pread.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pread : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/pread_chars.val"><a href="#/pread_chars.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pread_chars : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; char <a href="../Lwt_stream/index.html#/t.typ">Lwt_stream.t</a></div><div class="doc"></div></div></div><div class="region" id="/pread_line.val"><a href="#/pread_line.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pread_line : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/pread_lines.val"><a href="#/pread_lines.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pread_lines : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string <a href="../Lwt_stream/index.html#/t.typ">Lwt_stream.t</a></div><div class="doc"></div></div></div><div class="doc"><h3>Sending</h3></div><div class="region" id="/pwrite.val"><a href="#/pwrite.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pwrite : ?timeout:float -&gt; ?env:string array -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/pwrite_chars.val"><a href="#/pwrite_chars.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pwrite_chars : ?timeout:float -&gt; ?env:string array -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; char <a href="../Lwt_stream/index.html#/t.typ">Lwt_stream.t</a> -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/pwrite_line.val"><a href="#/pwrite_line.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pwrite_line : ?timeout:float -&gt; ?env:string array -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/pwrite_lines.val"><a href="#/pwrite_lines.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pwrite_lines : ?timeout:float -&gt; ?env:string array -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string <a href="../Lwt_stream/index.html#/t.typ">Lwt_stream.t</a> -&gt; unit <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="doc"><h3>Mapping</h3></div><div class="region" id="/pmap.val"><a href="#/pmap.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pmap : ?timeout:float -&gt; ?env:string array -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string -&gt; string <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/pmap_chars.val"><a href="#/pmap_chars.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pmap_chars : ?timeout:float -&gt; ?env:string array -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; char <a href="../Lwt_stream/index.html#/t.typ">Lwt_stream.t</a> -&gt; char <a href="../Lwt_stream/index.html#/t.typ">Lwt_stream.t</a></div><div class="doc"></div></div></div><div class="region" id="/pmap_line.val"><a href="#/pmap_line.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pmap_line : ?timeout:float -&gt; ?env:string array -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string -&gt; string <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="region" id="/pmap_lines.val"><a href="#/pmap_lines.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>pmap_lines : ?timeout:float -&gt; ?env:string array -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; string <a href="../Lwt_stream/index.html#/t.typ">Lwt_stream.t</a> -&gt; string <a href="../Lwt_stream/index.html#/t.typ">Lwt_stream.t</a></div><div class="doc"></div></div></div><div class="doc"><h2>Spawning processes</h2></div><div class="region" id="/state.typ"><a href="#/state.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>state = <table><tr class="cons"><td><div class="region" id="/state.typ/Running.cons"><a href="#/state.typ/Running.cons" class="anchor"></a>| Running</div></td><td>(*</td><td><div class="doc">The process is still running</div></td><td>*)</td></tr><tr class="cons"><td><div class="region" id="/state.typ/Exited.cons"><a href="#/state.typ/Exited.cons" class="anchor"></a>| Exited of Unix.process_status</div></td><td>(*</td><td><div class="doc">The process has exited</div></td><td>*)</td></tr></table></div><div class="doc">State of a sub-process</div></div></div><div class="class"><div class="def"><span class="keyword">class </span>process_none</div><div class="doc"></div></div><div class="region" id="/open_process_none.val"><a href="#/open_process_none.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>open_process_none : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; process_none</div><div class="doc"></div></div></div><div class="region" id="/with_process_none.val"><a href="#/with_process_none.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>with_process_none : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; (process_none -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="class"><div class="def"><span class="keyword">class </span>process_in</div><div class="doc"></div></div><div class="region" id="/open_process_in.val"><a href="#/open_process_in.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>open_process_in : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; process_in</div><div class="doc"></div></div></div><div class="region" id="/with_process_in.val"><a href="#/with_process_in.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>with_process_in : ?timeout:float -&gt; ?env:string array -&gt; ?stdin:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; (process_in -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="class"><div class="def"><span class="keyword">class </span>process_out</div><div class="doc"></div></div><div class="region" id="/open_process_out.val"><a href="#/open_process_out.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>open_process_out : ?timeout:float -&gt; ?env:string array -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; process_out</div><div class="doc"></div></div></div><div class="region" id="/with_process_out.val"><a href="#/with_process_out.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>with_process_out : ?timeout:float -&gt; ?env:string array -&gt; ?stdout:<a href="index.html#/redirection.typ">redirection</a> -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; (process_out -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="class"><div class="def"><span class="keyword">class </span>process</div><div class="doc"></div></div><div class="region" id="/open_process.val"><a href="#/open_process.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>open_process : ?timeout:float -&gt; ?env:string array -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; process</div><div class="doc"></div></div></div><div class="region" id="/with_process.val"><a href="#/with_process.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>with_process : ?timeout:float -&gt; ?env:string array -&gt; ?stderr:<a href="index.html#/redirection.typ">redirection</a> -&gt; <a href="index.html#/command.typ">command</a> -&gt; (process -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div><div class="class"><div class="def"><span class="keyword">class </span>process_full</div><div class="doc"></div></div><div class="region" id="/open_process_full.val"><a href="#/open_process_full.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>open_process_full : ?timeout:float -&gt; ?env:string array -&gt; <a href="index.html#/command.typ">command</a> -&gt; process_full</div><div class="doc"></div></div></div><div class="region" id="/with_process_full.val"><a href="#/with_process_full.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>with_process_full : ?timeout:float -&gt; ?env:string array -&gt; <a href="index.html#/command.typ">command</a> -&gt; (process_full -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a>) -&gt; 'a <a href="../Lwt/index.html#/t.typ">Lwt.t</a></div><div class="doc"></div></div></div></div></div></div></body></html>