<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>E (react.React.E)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/></head><body><div class="odoc-doc"><a href="../index.html">Up</a><div class="intro"><h1><span class="keyword">Module </span><a href="../#/E">E</a></h1></div><div class="mod"><div class="def"><span class="keyword">module </span>E : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Event combinators.<br/>Consult their evsem</div><hr/><div><div class="doc"><h1 id="prim">Primitive and basics</h1></div><div class="region" id="/t.typ"><a href="#/t.typ" class="anchor"></a><div class="typ"><div class="def"><span class="keyword">type </span>'a t = 'a <a href="../index.html#/event.typ">event</a></div><div class="doc">The type for events with occurrences of type <code>'a</code>.</div></div></div><div class="region" id="/never.val"><a href="#/never.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>never : 'a <a href="../index.html#/event.typ">event</a></div><div class="doc">A never occuring event. For all t, [<code>never</code>]<sub>t</sub> <code>= None</code>.</div></div></div><div class="region" id="/create.val"><a href="#/create.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>create : unit -&gt; 'a <a href="../index.html#/event.typ">event</a> * (?step:<a href="../index.html#/step.typ">step</a> -&gt; 'a -&gt; unit)</div><div class="doc"><code>create ()</code> is a primitive event <code>e</code> and a <code>send</code> function. The
function <code>send</code> is such that:
<ul><li><code>send v</code> generates an occurrence <code>v</code> of <code>e</code> at the time it is called
and triggers an steps.</li><li><code>send ~step v</code> generates an occurence <code>v</code> of <code>e</code> on the step <code>step</code>
when <code>step</code> is Step.execute.</li><li><code>send ~step v</code> raises <code>Invalid_argument</code> if it was previously
called with a step and this step has not executed yet or if
the given <code>step</code> was already executed.</li></ul><br/><span style="font-weight: bold">Warning.</span> <code>send</code> must not be executed inside an update step.</div></div></div><div class="region" id="/retain.val"><a href="#/retain.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>retain : 'a <a href="../index.html#/event.typ">event</a> -&gt; (unit -&gt; unit) -&gt; [ `R of unit -&gt; unit ]</div><div class="doc"><code>retain e c</code> keeps a reference to the closure <code>c</code> in <code>e</code> and
returns the previously retained value. <code>c</code> will <span style="font-style: italic">never</span> be
invoked.<br/><span style="font-weight: bold">Raises.</span> <code>Invalid_argument</code> on E.never.</div></div></div><div class="region" id="/stop.val"><a href="#/stop.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>stop : ?strong:bool -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; unit</div><div class="doc"><code>stop e</code> stops <code>e</code> from occuring. It conceptually becomes
never and cannot be restarted. Allows to
disable sideeffects events.<br/>The <code>strong</code> argument should only be used on platforms
where weak arrays have a strong semantics (i.e. JavaScript).
See strongstop.<br/><span style="font-weight: bold">Note.</span> If executed in an steps
the event may still occur in the step.</div></div></div><div class="region" id="/equal.val"><a href="#/equal.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>equal : 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; bool</div><div class="doc"><code>equal e e'</code> is <code>true</code> iff <code>e</code> and <code>e'</code> are equal. If both events are
different from never, physical equality is used.</div></div></div><div class="region" id="/trace.val"><a href="#/trace.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>trace : ?iff:bool <a href="../index.html#/signal.typ">signal</a> -&gt; ('a -&gt; unit) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>trace iff tr e</code> is <code>e</code> except <code>tr</code> is invoked with e's
occurence when <code>iff</code> is <code>true</code> (defaults to <code>S.const true</code>).
For all t where [<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>iff</code>]<sub>t</sub> =
<code>true</code>, <code>tr</code> is invoked with <code>v</code>.</div></div></div><div class="doc"><h1 id="transf">Transforming and filtering</h1></div><div class="region" id="/once.val"><a href="#/once.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>once : 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>once e</code> is <code>e</code> with only its next occurence.
<ul><li>[<code>once e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and
[<code>e</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>once e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/drop_once.val"><a href="#/drop_once.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>drop_once : 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>drop_once e</code> is <code>e</code> without its next occurrence.
<ul><li>[<code>drop_once e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and
[<code>e</code>]<sub>&lt;t</sub> <code>= Some _</code>.</li><li>[<code>drop_once e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/app.val"><a href="#/app.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>app : ('a -&gt; 'b) <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>app ef e</code> occurs when both <code>ef</code> and <code>e</code> occur
simultaneity.
The value is <code>ef</code>'s occurence applied to <code>e</code>'s one.
<ul><li>[<code>app ef e</code>]<sub>t</sub> <code>= Some v'</code> if [<code>ef</code>]<sub>t</sub> <code>= Some f</code> and
[<code>e</code>]<sub>t</sub> <code>= Some v</code> and <code>f v = v'</code>.</li><li>[<code>app ef e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/map.val"><a href="#/map.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>map : ('a -&gt; 'b) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>map f e</code> applies <code>f</code> to <code>e</code>'s occurrences.
<ul><li>[<code>map f e</code>]<sub>t</sub> <code>= Some (f v)</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code>.</li><li>[<code>map f e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/stamp.val"><a href="#/stamp.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>stamp : 'b <a href="../index.html#/event.typ">event</a> -&gt; 'a -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>stamp e v</code> is <code>map (fun _ -&gt; v) e</code>.</div></div></div><div class="region" id="/filter.val"><a href="#/filter.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>filter : ('a -&gt; bool) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>filter p e</code> are <code>e</code>'s occurrences that satisfy <code>p</code>.
<ul><li>[<code>filter p e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and
<code>p v = true</code></li><li>[<code>filter p e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/fmap.val"><a href="#/fmap.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>fmap : ('a -&gt; 'b option) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>fmap fm e</code> are <code>e</code>'s occurrences filtered and mapped by <code>fm</code>.
<ul><li>[<code>fmap fm e</code>]<sub>t</sub> <code>= Some v</code> if <code>fm</code> [<code>e</code>]<sub>t</sub> <code>= Some v</code></li><li>[<code>fmap fm e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/diff.val"><a href="#/diff.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>diff : ('a -&gt; 'a -&gt; 'b) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>diff f e</code> occurs whenever <code>e</code> occurs except on the next occurence.
Occurences are <code>f v v'</code> where <code>v</code> is <code>e</code>'s current
occurrence and <code>v'</code> the previous one.
<ul><li>[<code>diff f e</code>]<sub>t</sub> <code>= Some r</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code>,
[<code>e</code>]<sub>&lt;t</sub> <code>= Some v'</code> and <code>f v v' = r</code>.</li><li>[<code>diff f e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/changes.val"><a href="#/changes.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>changes : ?eq:('a -&gt; 'a -&gt; bool) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>changes eq e</code> is <code>e</code>'s occurrences with occurences equal to
the previous one dropped. Equality is tested with <code>eq</code> (defaults to
structural equality).
<ul><li>[<code>changes eq e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code>
and either [<code>e</code>]<sub>&lt;t</sub> <code>= None</code> or [<code>e</code>]<sub>&lt;t</sub> <code>= Some v'</code> and
<code>eq v v' = false</code>.</li><li>[<code>changes eq e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/on.val"><a href="#/on.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>on : bool <a href="../index.html#/signal.typ">signal</a> -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>on c e</code> is the occurrences of <code>e</code> when <code>c</code> is <code>true</code>.
<ul><li>[<code>on c e</code>]<sub>t</sub> <code>= Some v</code>
if [<code>c</code>]<sub>t</sub> <code>= true</code> and [<code>e</code>]<sub>t</sub> <code>= Some v</code>.</li><li>[<code>on c e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/when_.val"><a href="#/when_.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>when_ : bool <a href="../index.html#/signal.typ">signal</a> -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"></div></div></div><div class="region" id="/dismiss.val"><a href="#/dismiss.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>dismiss : 'b <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>dismiss c e</code> is the occurences of <code>e</code> except the ones when <code>c</code> occurs.
<ul><li>[<code>dimiss c e</code>]<sub>t</sub> <code>= Some v</code>
if [<code>c</code>]<sub>t</sub> <code>= None</code> and [<code>e</code>]<sub>t</sub> <code>= Some v</code>.</li><li>[<code>dimiss c e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/until.val"><a href="#/until.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>until : 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>until c e</code> is <code>e</code>'s occurences until <code>c</code> occurs.
<ul><li>[<code>until c e</code>]<sub>t</sub> <code>= Some v</code> if [<code>e</code>]<sub>t</sub> <code>= Some v</code> and
[<code>c</code>]<sub>&lt;=t</sub> <code>= None</code></li><li>[<code>until c e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="doc"><h1 id="accum">Accumulating</h1></div><div class="region" id="/accum.val"><a href="#/accum.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>accum : ('a -&gt; 'a) <a href="../index.html#/event.typ">event</a> -&gt; 'a -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>accum ef i</code> accumulates a value, starting with <code>i</code>, using <code>e</code>'s
functional occurrences.
<ul><li>[<code>accum ef i</code>]<sub>t</sub> <code>= Some (f i)</code> if [<code>ef</code>]<sub>t</sub> <code>= Some f</code>
and [<code>ef</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>accum ef i</code>]<sub>t</sub> <code>= Some (f acc)</code> if [<code>ef</code>]<sub>t</sub> <code>= Some f</code>
and [<code>accum ef i</code>]<sub>&lt;t</sub> <code>= Some acc</code>.</li><li>[<code>accum ef i</code>] <code>= None</code> otherwise.</li></ul></div></div></div><div class="region" id="/fold.val"><a href="#/fold.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>fold : ('a -&gt; 'b -&gt; 'a) -&gt; 'a -&gt; 'b <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>fold f i e</code> accumulates <code>e</code>'s occurrences with <code>f</code> starting with <code>i</code>.
<ul><li>[<code>fold f i e</code>]<sub>t</sub> <code>= Some (f i v)</code> if
[<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>e</code>]<sub>&lt;t</sub> <code>= None</code>.</li><li>[<code>fold f i e</code>]<sub>t</sub> <code>= Some (f acc v)</code> if
[<code>e</code>]<sub>t</sub> <code>= Some v</code> and [<code>fold f i e</code>]<sub>&lt;t</sub> <code>= Some acc</code>.</li><li>[<code>fold f i e</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div></div></div><div class="doc"><h1 id="combine">Combining</h1></div><div class="region" id="/select.val"><a href="#/select.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>select : 'a <a href="../index.html#/event.typ">event</a> list -&gt; 'a <a href="../index.html#/event.typ">event</a></div><p></p></div></div><div class="region" id="/merge.val"><a href="#/merge.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>merge : ('a -&gt; 'b -&gt; 'a) -&gt; 'a -&gt; 'b <a href="../index.html#/event.typ">event</a> list -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>merge f a el</code> merges the simultaneity
occurrences of every event in <code>el</code> using <code>f</code> and the accumulator <code>a</code>.<br/>[<code>merge f a el</code>]<sub>t</sub>
<code>= List.fold_left f a (List.filter (fun o -&gt; o &lt;&gt; None)
           (List.map</code> []<sub>t</sub><code> el))</code>.</div></div></div><div class="region" id="/switch.val"><a href="#/switch.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>switch : 'a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a> <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a></div><div class="doc"><code>switch e ee</code> is <code>e</code>'s occurrences until there is an
occurrence <code>e'</code> on <code>ee</code>, the occurrences of <code>e'</code> are then used
until there is a new occurrence on <code>ee</code>, etc..
<ul><li>[<code>switch e ee</code>]<sub>t</sub> <code>=</code> [<code>e</code>]<sub>t</sub> if [<code>ee</code>]<sub>&lt;=t</sub> <code>= None</code>.</li><li>[<code>switch e ee</code>]<sub>t</sub> <code>=</code> [<code>e'</code>]<sub>t</sub> if [<code>ee</code>]<sub>&lt;=t</sub>
<code>= Some e'</code>.</li></ul></div></div></div><div class="region" id="/fix.val"><a href="#/fix.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>fix : ('a <a href="../index.html#/event.typ">event</a> -&gt; 'a <a href="../index.html#/event.typ">event</a> * 'b) -&gt; 'b</div><div class="doc"><code>fix ef</code> allows to refer to the value an event had an
infinitesimal amount of time before.<br/>In <code>fix ef</code>, <code>ef</code> is called with an event <code>e</code> that represents
the event returned by <code>ef</code> delayed by an infinitesimal amount of
time. If <code>e', r = ef e</code> then <code>r</code> is returned by <code>fix</code> and <code>e</code>
is such that :
<ul><li>[<code>e</code>]<sub>t</sub> <code>=</code> <code>None</code> if t = 0</li><li>[<code>e</code>]<sub>t</sub> <code>=</code> [<code>e'</code>]<sub>t-dt</sub> otherwise</li></ul><br/><span style="font-weight: bold">Raises.</span> <code>Invalid_argument</code> if <code>e'</code> is directly a delayed event (i.e.
an event given to a fixing function).</div></div></div><div class="doc"><h1>Lifting</h1><br/>Lifting combinators. For a given <code>n</code> the semantics is:
<ul><li>[<code>ln f e1 ... en</code>]<sub>t</sub> <code>= Some (f v1 ... vn)</code> if for all
i : [<code>ei</code>]<sub>t</sub> <code>= Some vi</code>.</li><li>[<code>ln f e1 ... en</code>]<sub>t</sub> <code>= None</code> otherwise.</li></ul></div><div class="region" id="/l1.val"><a href="#/l1.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>l1 : ('a -&gt; 'b) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a></div><div class="doc"></div></div></div><div class="region" id="/l2.val"><a href="#/l2.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>l2 : ('a -&gt; 'b -&gt; 'c) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a> -&gt; 'c <a href="../index.html#/event.typ">event</a></div><div class="doc"></div></div></div><div class="region" id="/l3.val"><a href="#/l3.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>l3 : ('a -&gt; 'b -&gt; 'c -&gt; 'd) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a> -&gt; 'c <a href="../index.html#/event.typ">event</a> -&gt; 'd <a href="../index.html#/event.typ">event</a></div><div class="doc"></div></div></div><div class="region" id="/l4.val"><a href="#/l4.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>l4 : ('a -&gt; 'b -&gt; 'c -&gt; 'd -&gt; 'e) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a> -&gt; 'c <a href="../index.html#/event.typ">event</a> -&gt; 'd <a href="../index.html#/event.typ">event</a> -&gt; 'e <a href="../index.html#/event.typ">event</a></div><div class="doc"></div></div></div><div class="region" id="/l5.val"><a href="#/l5.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>l5 : ('a -&gt; 'b -&gt; 'c -&gt; 'd -&gt; 'e -&gt; 'f) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a> -&gt; 'c <a href="../index.html#/event.typ">event</a> -&gt; 'd <a href="../index.html#/event.typ">event</a> -&gt; 'e <a href="../index.html#/event.typ">event</a> -&gt; 'f <a href="../index.html#/event.typ">event</a></div><div class="doc"></div></div></div><div class="region" id="/l6.val"><a href="#/l6.val" class="anchor"></a><div class="val"><div class="def"><span class="keyword">val </span>l6 : ('a -&gt; 'b -&gt; 'c -&gt; 'd -&gt; 'e -&gt; 'f -&gt; 'g) -&gt; 'a <a href="../index.html#/event.typ">event</a> -&gt; 'b <a href="../index.html#/event.typ">event</a> -&gt; 'c <a href="../index.html#/event.typ">event</a> -&gt; 'd <a href="../index.html#/event.typ">event</a> -&gt; 'e <a href="../index.html#/event.typ">event</a> -&gt; 'f <a href="../index.html#/event.typ">event</a> -&gt; 'g <a href="../index.html#/event.typ">event</a></div><div class="doc"></div></div></div><div class="doc"><h1>Pervasives support</h1></div><div class="region" id="/Option"><a href="#/Option" class="anchor"></a><div class="mod"><div class="def"><span class="keyword">module </span><a href="Option/index.html">Option</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></div><div class="doc">Events with option occurences.</div></div></div></div></div></div></body></html>